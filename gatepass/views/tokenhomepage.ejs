<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Token Generation</title>
  <link rel="stylesheet" href="/stylesheets/codescanner.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

  <link rel="icon" href="/images/4174.png">
  <script>
    var barcode = '';
    var interval;
    document.addEventListener('keydown', function(evt) {
      if (interval)
        clearInterval(interval);
      if (evt.code == 'Enter') {
        if (barcode)
          handleBarcode(barcode);
        barcode = '';
        return;
      }
      if (evt.key != 'Shift')
        barcode += evt.key;
      interval = setInterval(() => barcode = '', 20);
    });

    function handleBarcode(scanned_barcode) {
      location.href = "http://gate.svpcet.in/token/" + scanned_barcode;

    }

    function myfun() {
      $("div.yyyyy").fadeIn(300).delay(1500).fadeOut(400);
    }

    function showdiv() {
     
      document.getElementById("staticuid").hidden = !document.getElementById("staticuid").hidden
    }

    function manualenter() {
      var UID = document.getElementById("inp").value;
      location.href = "http://gate.svpcet.in/token/" + UID;
    }
  </script>
</head>

<body onload="myfun()">
    <div class="bg-image" 
    style="background-image: url('/images/tokenhomepagebg.png');
           height: 100vh ; width:50vh; ;"  >
  
    <center>
      <% if(message.length>0){ %>
      <div class="alert-danger yyyyy">
        <h5>
          <%- message %>
        </h5>
      </div>
      <% } %>
      <img src="/images/logo.png" height="auto" width="auto" class="center" /><br><br>
      <div class="m-4">
        <nav class="navbar navbar-expand-lg navbar-light bg-light text-dark">
          <a href="#" class="nav-item nav-link text-dark" onclick="showdiv()">Enter UID</a>
          <a href="hostelouttoday" class="nav-item nav-link text-dark">Hostel Out</a>
          <a href="reports" class="nav-item nav-link text-dark">Hostel Monitor</a>
          <div class="navbar-nav ms-auto">
            <a href="/logout" class="nav-item nav-link text-dark">Logout</a>
          </div>
        </nav>
      </div><br><br>
      <div id="pp"></div>
      <div id="staticuid" hidden>
        <div for="inp" class="inp">
          <input type="text" id="inp" placeholder="&nbsp;">
          <span class="label text-dark">UID</span>
          <span class="focus-bg"></span>
        </div><br>
        <div>
          <center><button class="btn btn-dark" onclick="manualenter()">Next</button></center>

        </div>
      </div>
  </div>
  </div>
</div>
</body>

</html>